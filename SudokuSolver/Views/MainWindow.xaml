<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="SudokuSolver.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:SudokuSolver.Views">

    <Window.SystemBackdrop>
        <MicaBackdrop Kind="BaseAlt"/>
    </Window.SystemBackdrop>

    <Grid x:Name="LayoutRoot" Opacity="0">
        <Grid.OpacityTransition>
            <ScalarTransition Duration="00:00:00.350"/>
        </Grid.OpacityTransition>
        
        <!-- used to add print preview pages to the visual tree -->
        <Canvas x:Name="PrintCanvas" Opacity="0"/>

        <TabView x:Name="Tabs" 
            VerticalAlignment="Stretch"
            HorizontalAlignment="Stretch"
            AddTabButtonClick="Tabs_AddTabButtonClick"
            TabCloseRequested="Tabs_TabCloseRequestedAsync"
            TabItemsChanged="Tabs_TabItemsChangedAsync"
            TabDroppedOutside="Tabs_TabDroppedOutside"
            TabStripDrop="Tabs_TabStripDrop"
            TabWidthMode="SizeToContent">

            <TabView.KeyboardAccelerators>
                <!-- new tab -->
                <KeyboardAccelerator Key="T" Modifiers="Control"/>
                <!-- navigate to numbered tab -->
                <KeyboardAccelerator Key="Number1" Modifiers="Control"/>
                <KeyboardAccelerator Key="Number2" Modifiers="Control"/>
                <KeyboardAccelerator Key="Number3" Modifiers="Control"/>
                <KeyboardAccelerator Key="Number4" Modifiers="Control"/>
                <KeyboardAccelerator Key="Number5" Modifiers="Control"/>
                <KeyboardAccelerator Key="Number6" Modifiers="Control"/>
                <KeyboardAccelerator Key="Number7" Modifiers="Control"/>
                <KeyboardAccelerator Key="Number8" Modifiers="Control"/>
                <KeyboardAccelerator Key="Number9" Modifiers="Control" />
            </TabView.KeyboardAccelerators>

            <TabView.TabStripHeader>
                <Grid PointerPressed="TabStripHeader_PointerPressed" Background="{ThemeResource LayerOnMicaBaseAltFillColorTransparentBrush}">
                    <Image x:Name="WindowIcon" Source="ms-appx:///Resources/app.png" Height="16" Margin="10,8,4,0"/>
                </Grid>
            </TabView.TabStripHeader>
            <TabView.TabStripFooter>
                <Grid ColumnDefinitions ="Auto,*">
                    <Border x:Name="JumpToTabButton" Padding="{ThemeResource TabViewItemAddButtonContainerPadding}" VerticalAlignment="Bottom">
                        <Button HorizontalAlignment="Center" VerticalAlignment="Center" Style="{StaticResource TabViewButtonStyle}" Click="TabJumpListMenuButton_Click">
                            <FontIcon FontSize="{ThemeResource TabViewItemAddButtonFontSize}" FontFamily="{ThemeResource SymbolThemeFontFamily}" Foreground="{ThemeResource TabViewItemIconForeground}" Glyph="&#xE96E;"/>
                        </Button>
                    </Border>
                    <!-- used to stop the caption buttons overlapping the tab buttons -->
                    <Grid x:Name="RightPaddingColumn" Grid.Column="1" SizeChanged="RightPaddingColumn_SizeChanged"/>
                </Grid>
            </TabView.TabStripFooter>
        </TabView>

        <Grid.Resources>
            <MenuFlyout x:Key="SystemMenu" Opening="MenuFlyout_Opening" Closing="MenuFlyout_Closing" OverlayInputPassThroughElement="{x:Bind LayoutRoot}">
                
                <MenuFlyoutItem x:Uid="SystemMenuRestore" Command="{x:Bind restoreCommand}" AccessKey="R"/>
                <MenuFlyoutItem x:Uid="SystemMenuMove" Command="{x:Bind moveCommand}" AccessKey="M"/>
                <MenuFlyoutItem x:Uid="SystemMenuSize" Command="{x:Bind sizeCommand}" AccessKey="S"/>
                <MenuFlyoutItem x:Uid="SystemMenuMinimize" Command="{x:Bind minimizeCommand}" AccessKey="N"/>
                <MenuFlyoutItem x:Uid="SystemMenuMaximize" Command="{x:Bind maximizeCommand}" AccessKey="X"/>

                <MenuFlyoutSeparator/>

                <MenuFlyoutItem x:Uid="SystemMenuCloseTab" Command="{x:Bind closeTabCommand}" AccessKey="W">
                    <MenuFlyoutItem.KeyboardAccelerators>
                        <!-- disabled because it's a duplicate -->
                        <KeyboardAccelerator Modifiers="Control" Key="W" IsEnabled="False"/>
                    </MenuFlyoutItem.KeyboardAccelerators>
                </MenuFlyoutItem>
                <MenuFlyoutItem x:Uid="SystemMenuCloseWindow" Command="{x:Bind closeWindowCommand}" AccessKey="C">
                    <MenuFlyoutItem.KeyboardAccelerators>
                        <!-- disabled because it's a duplicate -->
                        <KeyboardAccelerator Modifiers="Menu" Key="F4" IsEnabled="False"/>
                    </MenuFlyoutItem.KeyboardAccelerators>
                </MenuFlyoutItem>
            </MenuFlyout>
        </Grid.Resources>
    </Grid>
</Window>
